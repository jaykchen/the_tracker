@startuml

!define RECTANGLE class

' Hourly Loop
RECTANGLE Hourly_Collection {
  Retrieve and store issues with updated comments on an hourly basis.
  Fetches and saves issues with specific labels and comments updated within a defined date range. Flags issues for AI analysis.
  query_responses/search_issues_w_update_comments.gql
}

RECTANGLE Wait_Until_Next_Hour

Hourly_Collection --> Wait_Until_Next_Hour : next_step

' Daily Loop
RECTANGLE Daily_Collection {
  Collect initial open issues with target labels within a specific date range.
  Fetches and saves initial open issues.
  query_responses/search_issues_open.gql

  Daily update on pull requests and issue correlation with target labels.
  Fetches pull requests, updates issues daily.
  query_responses/search_pull_requests_overall.gql

  Update the status of closed issues on a daily basis.
  Identifies and updates issues with a closed status.
  query_responses/search_issues_closed.gql

  Perform a detailed cross-check of pull requests and issues per repository.
  Cross-match issues with pull requests in the database, identifying missed connections.
  query_responses/get_per_repo_pull_requests.gql
}

RECTANGLE Human_Intervention {
  Daily monitoring and adjustment of issue/project status by an administrator.
  Changes in issue status will influence the program's handling of these items.
}

RECTANGLE Daily_Loop_Ends {
  Wait until the next cycle before repeating the daily loop.
}

Daily_Collection --> Human_Intervention : next_step
Human_Intervention --> Daily_Loop_Ends : next_step

@enduml