<?xml version="1.0" encoding="UTF-8"?>
<diagram>
    <start />
    <hourly_loop>
        <layer_1_hourly_collection>
            <search_issues_w_update_comments>
                <objective>Fetch & save issues with updated comments hourly. Gets issues with intended labels, comments updated within date range. Flag issues with AI query.</objective>
                <query>query_responses/search_issues_w_update_comments.gql</query>
            </search_issues_w_update_comments>
            <wait_until_next_hour />
        </layer_1_hourly_collection>
        <repeat_hourly_loop />
    </hourly_loop>
    <daily_loop>
        <layer_1_daily_collection>
            <search_issues_open>
                <objective>Fetch & save initial open issues daily. Gets issues with target labels in date range.</objective>
                <query>query_responses/search_issues_open.gql</query>
            </search_issues_open>
            <overall_search_pull_requests>
                <objective>Fetch pull requests, update issues daily. Get Pull requests with target labels, hoping to match issues already logged.</objective>
                <query>query_responses/search_pull_requests_overall.gql</query>
            </overall_search_pull_requests>
            <search_issues_closed>
                <objective>Update closed issues daily. Almost same conditions for issues, identifying those with closed status.</objective>
                <query>query_responses/search_issues_closed.gql</query>
            </search_issues_closed>
            <get_per_repo_pull_requests>
                <objective>Cross-check data daily. A more granular search to walk the projects saved in the database, cross matching issues with pull requests, hoping to get connections missed in previous steps.</objective>
                <query>query_responses/get_per_repo_pull_requests.gql</query>
            </get_per_repo_pull_requests>
        </layer_1_daily_collection>
        <layer_2_human_intervention>
            <admin_monitors_alters>
                <note>Changed status of issues will cause program to handle differently.</note>
            </admin_monitors_alters>
        </layer_2_human_intervention>
        <daily_loop_ends />
        <wait_until_next_cycle />
        <repeat_the_daily_loop />
    </daily_loop>
</diagram>